<%- include('../../partials/header') %>

<h1 class="text-2xl font-bold text-gray-900 dark:text-white mb-6">Edit Pantry Item</h1>

<div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 shadow-sm p-6 max-w-2xl">
  <form method="POST" action="/pantry/<%= item.id %>/edit" class="space-y-4">
    <input type="hidden" name="_csrf" value="<%= csrfToken %>">

    <div>
      <label for="name" class="form-label">Name <span class="text-red-500">*</span></label>
      <input type="text" id="name" name="name" value="<%= item.name %>" required autofocus class="form-input">
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <label for="quantity" class="form-label">Quantity</label>
        <input type="number" id="quantity" name="quantity" step="0.01" min="0" value="<%= item.quantity || '' %>" class="form-input">
      </div>
      <div>
        <label for="unit" class="form-label">Unit</label>
        <select id="unit" name="unit" class="form-input">
          <option value="">-- Select --</option>
          <% if (typeof units !== 'undefined') { %>
            <% units.forEach(function(u) { %>
              <option value="<%= u %>" <%= item.unit === u ? 'selected' : '' %>><%= u %></option>
            <% }); %>
          <% } %>
        </select>
      </div>
    </div>

    <div>
      <label for="category" class="form-label">Category</label>
      <select id="category" name="category" class="form-input">
        <option value="">-- Select --</option>
        <% if (typeof categories !== 'undefined') { %>
          <% categories.forEach(function(c) { %>
            <option value="<%= c %>" <%= item.category === c ? 'selected' : '' %>><%= c %></option>
          <% }); %>
        <% } %>
      </select>
    </div>

    <div>
      <label for="expirationDate" class="form-label">Expiration Date</label>
      <input type="date" id="expirationDate" name="expirationDate" value="<%= item.expirationDate ? new Date(item.expirationDate).toISOString().split('T')[0] : '' %>" class="form-input">
    </div>

    <div>
      <label for="notes" class="form-label">Notes</label>
      <textarea id="notes" name="notes" rows="3" class="form-input"><%= item.notes || '' %></textarea>
    </div>

    <div class="flex flex-col sm:flex-row gap-3 pt-2">
      <button type="submit" class="btn-primary flex-1">Save Changes</button>
      <a href="/pantry" class="btn-secondary flex-1 text-center">Cancel</a>
    </div>
  </form>
</div>

<%- include('../../partials/footer') %>
